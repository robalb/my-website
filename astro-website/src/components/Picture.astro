---
export interface Props {
	alt: string;
	src: string;
  height?: number;
}
 /**
 * This component allows you to integrate a simple png located in assets/posts/
 * into a markdown file.
 * The image must be a png
 * the filename should start with the name of the destination file followed by a dash.
 * for example, the hero image for the article how-to-make-pasta.md
 * could be called how-to-make-pasta-hero.png
 * usage:
 * ---
 * setup: |
 *   import Picture from '../../components/Picture.astro'
 * ---
 * <Picture src="filename-without-extension" alt="yolo swagz" />
 */

const { alt, src, height=null } = Astro.props;

const base = (await import(`../assets/posts/${src}.png`)).default

let w = base.width
let h = base.height
//if a custom height is provided, that means that
// we want to scale the image to a fixed height.
//adjust the width to maintain the image proportions
if(height){
  w = Math.floor(w * height / h)
  h = height
}
//note: the image is styled in style.css, "article img"

---


<img src={base.src} height={h} width={w} alt={alt} />
